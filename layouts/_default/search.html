{{ define "main" }} <!-- https://gist.github.com/eddiewebb/735feb48f50f0ddd65ae5606a1cb41ae -->
<main>
  <div class="search">
      <header>
          <h1>Search results for: "<script>
              var url_string = window.location.href;
              var url = new URL(url_string);
              var q = url.searchParams.get("q");
              document.write(q);
            </script>"
          </h1>
          {{/* partial "debugprint.html" (site.GetPage "/search") */}}
      </header>

      <hr />

      <div id="search-results"></div>
  </div>
</main>

<script id="search-result-template" type="text/x-js-template"><div id="summary-${key}">
        <h2 class="post-title no-text-decoration"><a href="${link}">${title}</a></h2>
        <p><em>${snippet}&hellip;</em></p>
    </div></script>
{{ end }}

{{ define "aside" }}
<aside class="sidebar" tabindex="0">
  {{ partial "widgets/widgets" (dict "page" .Page "site" .Site "content" .Site.Data.config.sidebar_widgets.widgets ) }}
</aside>
{{ end }}

{{ define "footer" }}
<script src={{ "js/libs/jquery/3.3.1/jquery.min.js" | absURL }}></script>
<script src={{ "js/libs/fuse.js/3.2.1/fuse.min.js" | absURL }}></script>
<script src={{ "js/libs/mark.js/8.11.1/jquery.mark.min.js" | absURL }}></script>

<!-- Below works *only if* this theme component is named "hugo-search-fuse-js"
     AND *if* the themesDir is left at the default value of "themes".  -->
{{ $search_js_md5 := (readFile "themes/bugo-search/static/js/search.js" | md5) }}
<script src={{ printf "%s?%s" ("js/search.js" | absURL) $search_js_md5 }}></script>
{{ end }}
